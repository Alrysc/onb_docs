
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://alrysc.github.io/onb_docs/updates/v2.1/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>v2.1 - ONB Modding</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#v21" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ONB Modding" class="md-header__button md-logo" aria-label="ONB Modding" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ONB Modding
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              v2.1
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../lua/" class="md-tabs__link">
          
  
  
  Lua Primer

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../onb_overview/" class="md-tabs__link">
          
  
  
  Engine Objects

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ONB Modding" class="md-nav__button md-logo" aria-label="ONB Modding" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ONB Modding
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Lua Primer
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Lua Primer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/comments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Comments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Variables
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Variables
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/variables/numbers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Numbers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/variables/strings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/variables/booleans/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Booleans
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/variables/functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/variables/tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tables
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/boolean_expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Boolean Expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/comparisons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Comparisons
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/control_structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Structures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scope
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tables As Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lua/useful_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Useful Functions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Engine Objects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Engine Objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Entities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Entities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Entity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/entities/artifact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Artifact
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/entities/spell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/entities/obstacle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Obstacle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/entities/character/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Character
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/entities/player/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Player
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/element/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Element
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/hit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/tilestate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TileState
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/direction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Direction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/team/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Team
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/lifetimes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lifetimes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/defenseorder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DefenseOrder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/locktype/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LockType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/input/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/rank/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rank
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/highlight/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Highlight
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/shadow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shadow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/colormode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ColorMode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/playback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Playback
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/audiopriority/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AudioPriority
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/audiotype/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AudioType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/cardclass/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CardClass
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/blocks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blocks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../onb_overview/enums/entitystatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EntityStatus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      Changelog
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended-mod-upgrades" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Mod Upgrades
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recommended Mod Upgrades">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-things-you-may-want-to-add" class="md-nav__link">
    <span class="md-ellipsis">
      New Things You May Want To Add
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New Things You May Want To Add">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-charge-times" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Charge Times
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-to-shoulder-buttons" class="md-nav__link">
    <span class="md-ellipsis">
      Access to Shoulder Buttons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safer-card_action_event" class="md-nav__link">
    <span class="md-ellipsis">
      Safer card_action_event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hitno_counter" class="md-nav__link">
    <span class="md-ellipsis">
      Hit.no_counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#battle_end_func-and-battle_start_func" class="md-nav__link">
    <span class="md-ellipsis">
      battle_end_func and battle_start_func
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timefreeze-action_end_func" class="md-nav__link">
    <span class="md-ellipsis">
      TimeFreeze action_end_func
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timefreeze-uncounterable" class="md-nav__link">
    <span class="md-ellipsis">
      TimeFreeze Uncounterable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_counter_frame_range" class="md-nav__link">
    <span class="md-ellipsis">
      set_counter_frame_range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#breaking-metal-tiles" class="md-nav__link">
    <span class="md-ellipsis">
      Breaking Metal Tiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#engine-alert-symbol" class="md-nav__link">
    <span class="md-ellipsis">
      Engine Alert Symbol
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavior-changes-be-aware" class="md-nav__link">
    <span class="md-ellipsis">
      Behavior Changes (Be Aware)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Behavior Changes (Be Aware)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-hitdrag" class="md-nav__link">
    <span class="md-ellipsis">
      Using Hit.Drag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#movement-endlag" class="md-nav__link">
    <span class="md-ellipsis">
      Movement Endlag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spawning-hit-effects" class="md-nav__link">
    <span class="md-ellipsis">
      Spawning Hit Effects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-moving-attacks" class="md-nav__link">
    <span class="md-ellipsis">
      Deleting Moving Attacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find_nearest_characters-fix" class="md-nav__link">
    <span class="md-ellipsis">
      find_nearest_characters Fix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fire-and-grass" class="md-nav__link">
    <span class="md-ellipsis">
      Fire and Grass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grass-lava-effects" class="md-nav__link">
    <span class="md-ellipsis">
      Grass, Lava Effects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-tilestates" class="md-nav__link">
    <span class="md-ellipsis">
      New TileStates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="v21">v2.1</h1>
<p>v2.1 pulls some fixes, changes, and features from ahead in the repo's history, and even from 
Jamesking's work on the upcoming v2.5, with extra help from James in devising and revising 
the new systems in play that weren't in v2.5 yet.</p>
<p>This is a non-breaking update. No mods should be broken, but some behavior has
been affected, and new behavior is now possible that you may want to implement. 
Read the changelog, then see <a href="#recommended-mod-upgrades">Recommended Mod Upgrades</a>.</p>
<p>If any mods have broken, ping me (Alrysc) on Discord and I'll see about patching. </p>
<h2 id="changelog">Changelog</h2>
<ul>
<li>Folder and pack can be sorted using the Pause button (default Enter) </li>
<li>Folders can be copied with CTRL+C while editing</li>
<li>Sea, Metal, and Sand TileStates added<ul>
<li>Sea boosts damage of Aqua cards used on them, doubles Elec damage taken while on one, and roots Entities that step on them</li>
<li>Metal cannot be cracked or broken</li>
<li>Sand roots Entities that step on them and doubles Wind damage taken while on one</li>
</ul>
</li>
<li>Charge times are recalculated even without flinching<ul>
<li>Player.charged_time_table_func and PlayerForm.charged_time_table_func can be used reliably as a result</li>
</ul>
</li>
<li>Wood element Entities will heal over time while standing on a Grass Tile</li>
<li>Fire element Entities will not take damage from Lava</li>
<li>Elec damage is no longer doubled on Ice</li>
<li>Grass Tiles are now removed by Fire, even if damage was not dealt to any Entities</li>
<li>Holy Panel damage rounds up</li>
<li>Movement no longer acts as if endlag is 1 frame when it's 0 frames</li>
<li>Drag lasts the correct amount of time now</li>
<li>Pressing inputs during Stun and Freeze will cause them to end more quickly</li>
<li>Status interactions with each other are overall more accurate<ul>
<li>Some may cancel others, and will do so correctly</li>
</ul>
</li>
<li>Form changing will cancel various statuses</li>
<li>Flinching can no longer be cancelled by using a card</li>
<li>TFC cannot be performed until 10 frames into time freeze</li>
<li>Charge is no longer used up when performing TFC</li>
<li>Anger/FullSync now only consumed by boostable cards</li>
<li>Time freeze actions show damage and modifiers</li>
<li>Health turns red at low HP</li>
<li>Mugshots no longer bounce</li>
<li>Freedom battles always send data to the server, and turns can no longer end while the last enemy is dying</li>
<li>Freedom battles read input during time freeze</li>
<li>Card long descriptions are prioritized over short descriptions in battle</li>
<li>Time Freeze actions can be marked uncounterable</li>
<li>Time Freeze actions now call action_end_func</li>
<li>Field.find_nearest_characters returns an ordered table</li>
<li>Battle.AlertSymbol.new is available</li>
<li>Access to Left_Shoulder and Right_Shoulder inputs</li>
<li>Hit.NoCounter hitflag, prevents attack from countering</li>
<li>All Entities can use battle_start_func and battle_end_func</li>
<li>Access to Character.can_attack</li>
<li>Access to Entity.set_counter_frame_range</li>
<li>Access to Entity. is_stunned, is_frozen, is_rooted, and is_blind</li>
</ul>
<h2 id="recommended-mod-upgrades">Recommended Mod Upgrades</h2>
<p>No mods should be broken by this update, but modders now have an opportunity to 
add more to their mods. Some of these recommendations are to warn about behavioral 
changes, but mod updates are not necessarily required.</p>
<p>Other recommendations are for new things that can be added to mods to either make 
certain logic safer, or improve mods with new functionality.</p>
<h3 id="new-things-you-may-want-to-add">New Things You May Want To Add</h3>
<h4 id="custom-charge-times">Custom Charge Times</h4>
<p>v2.1 fixes charge time calculation, which means Player mods are free to have unique 
charge times. If you do not add one, the mod will continue to use the default 
provided by the engine.</p>
<p>This is done using the <code>charged_time_table_func</code>, both on Players and on PlayerForms.
The <code>charged_time_table_func</code> is passed a number <code>level</code> representing the current 
Charge level, and expects a <code>frametime</code> to be returned. The <code>level</code> will be a number 
from 1 to 5, inclusive. Be sure to cover all cases.</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">player</span><span class="p">:</span><span class="nf">create_form</span><span class="p">()</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nv">player</span><span class="p">.</span><span class="py">charged_time_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">level</span><span class="p">)</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nf">frames</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nf">frames</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">    </span><span class="c1">-- etc.</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="kr">end</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="nv">form</span><span class="p">.</span><span class="py">charged_time_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">level</span><span class="p">)</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nf">frames</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nf">frames</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">    </span><span class="c1">-- etc.</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="kr">end</span>
</span></code></pre></div>
<p>Some tips for determining charge times:</p>
<ul>
<li>The default charge time is 90 frames at level 1, 80 at level 2, 70 at level 3, 60 at level 4, and 50 and level 5.</li>
<li>If your charge time can be based on a formula, use one<ul>
<li>For exmaple, the ONB default can be replicated in one line with <code>return frames(100 - 10 * level)</code></li>
</ul>
</li>
<li>The official games often do not use linear charge times. For example, HeatCross in BN6 has times 
 60, 50, 40, 35, 30, for levels 1-5. Notice how having more levels past 3 has lesser effect.</li>
<li>The returned time is applied <em>after</em> holding the Shoot button for 10 frames (when the graphic appears)<ul>
<li>This means returning <code>frames(10)</code> actually means you need to hold B for 20 frames total to be fully charged</li>
<li>Sources on charge times for the official games may or may not count the 10 frames before holding Shoot. 
Take this into consideration when taking data from other sources. </li>
</ul>
</li>
</ul>
<p>If your mod changes the <code>Player.charged_attack_func</code>, consider also changing the <code>Player.charged_time_func</code> 
to go with it. If you do change the <code>charged_time_func</code>, remember that it will not be run when set. 
To recalculate time with the new function, you can set your charge level, for example by doing 
<code>player:set_charge_level(player:get_charge_level())</code>.</p>
<h4 id="access-to-shoulder-buttons">Access to Shoulder Buttons</h4>
<p>v2.1 adds the <code>right_shoulder</code> and <code>left_shoulder</code> inputs to be read by mods. You 
can perform some logic based on these, and you might have some mods that were getting 
especially crowded using only the Special button. </p>
<p>Note that the shoulders are typically used to open the Custom screen. Your logic may 
be performed at the same time the Custom screen opens if the Custom Gauge is full.</p>
<h4 id="safer-card_action_event">Safer card_action_event</h4>
<p>In v2.0, if you used <code>Character.card_action_event</code>, you had no way of knowing whether 
or not the Card would be added or would execute, or even could execute. You might 
have queued the action multiple times, causing it to happen more times than intended. 
With v2.1, this can be made somewhat safer because we can check whether or not the 
Character is available to perform an action using <code>Character.can_attack</code>.</p>
<p><code>Character.can_attack</code> returns false if the Character already has a CardAction, or 
is flinching, stunned, frozen, or in the middle of Drag. By combining this with a 
check for <code>Entity.is_moving</code>, you can more consistently avoid queueing the action 
multiple times, since the frame after you queue the action <code>Character.can_attack</code> will 
return false until the action has either finished or been discarded.</p>
<p><div class="language-lua highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">player</span><span class="p">.</span><span class="py">update_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">self</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">can_act</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">player</span><span class="p">:</span><span class="nf">can_attack</span><span class="p">()</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">player</span><span class="p">:</span><span class="nf">is_moving</span><span class="p">()</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">can_act</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">player</span><span class="p">:</span><span class="nf">input_has</span><span class="p">(</span><span class="nv">Input</span><span class="p">.</span><span class="py">Pressed</span><span class="p">.</span><span class="py">Left_Shoulder</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">        </span><span class="nv">player</span><span class="p">:</span><span class="nf">card_action_event</span><span class="p">(</span><span class="nf">make_my_action</span><span class="p">(),</span><span class="w"> </span><span class="nv">ActionOrder</span><span class="p">.</span><span class="py">Voluntary</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="kr">end</span><span class="w"> </span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="kr">end</span>
</span></code></pre></div>
If the above code did not make those checks, a player could repeatedly press the left shoulder
button and queue the action multiple times, or could even press it while stunned and have the 
action happen immediately when stun ends. Guarding the <code>card_action_event</code> with <code>can_attack</code> 
and <code>is_moving</code> prevents this.</p>
<h4 id="hitno_counter">Hit.no_counter</h4>
<p>You can now make attacks that can never counterhit. In v2.0, this was able to be done using 
the raw value of the enum (2048), but now the enum value is accessible using <code>Hit.no_counter</code>. 
If you used <code>2048</code>, consider updating to use the enum value, which is guaranteed to always 
work in the future.</p>
<h4 id="battle_end_func-and-battle_start_func"><code>battle_end_func</code> and <code>battle_start_func</code></h4>
<p>All Entities can use the <code>battle_start_func</code> and <code>battle_end_func</code> now. This is most likely 
to come up where modders have wanted to remove Spells from the Field when battle ends, or 
prevent enemies from spawning new attacks, which is common for official game behavior. </p>
<h4 id="timefreeze-action_end_func">TimeFreeze action_end_func</h4>
<p>In v2.0, time freeze CardActions did not call their <code>action_end_func</code>. This has been fixed. 
If your mods had certain cleanup that must be performed at the end, this could be a good 
place to move things.</p>
<h4 id="timefreeze-uncounterable">TimeFreeze Uncounterable</h4>
<p>Time freeze actions can now be marked as uncounterable, using <code>CardMeta.counterable = false</code>.</p>
<p>Try not to abuse it too much. This is typically used for time freezes that happen as a 
result of some condition, like Guardian being hit, or an elemental attack appearing 
on the field and triggering ElementTrap, or a boss changing phases. Mods that have these 
sorts of actions likely already wanted to be uncounterable, and now they can be.</p>
<h4 id="set_counter_frame_range">set_counter_frame_range</h4>
<p>Instead of toggling counter on and off, you can now set a range of frames for which an 
Entity will be counterable. This is based on the current animation.</p>
<p>In the official games, almost every counterable action has counter frames for the first 
15 or 16 frames (to be determined). If you wanted your scripted action to be conuterable 
for this frame, you can do</p>
<p><div class="language-lua highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nv">action</span><span class="p">.</span><span class="py">execute_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">self</span><span class="p">,</span><span class="w"> </span><span class="nv">actor</span><span class="p">)</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="c1">-- TODO: This could be (1, 16), or (1, 15), or (2, 16), or (2, 15)</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nv">actor</span><span class="p">:</span><span class="nf">set_counter_frame_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kr">end</span>
</span></code></pre></div>
Note that this is done specifically in the <code>execute_func</code>, which is the first time the 
user has entered the action animation.</p>
<h4 id="breaking-metal-tiles">Breaking Metal Tiles</h4>
<p>The Metal TileState prevents cracking and breaking a Tile. This means calls like 
<code>tile:set_state(TileState.Cracked)</code> or <code>tile:set_state(TileState.Broken)</code> will do 
nothing if the current state is <code>TileState.Metal</code>. </p>
<p>Some effects intend to <em>overwrite</em> Tiles, which is different flavor from <em>breaking</em> 
them. For example, in BN3, MetalMan, GutsMan, and BassGS don't affect Metal Tiles, 
but Geddon1 and Geddon2 do. Geddon1 cracks all Tiles, including Metal Tiles; Geddon2 
turns all Tiles into holes, but Metal Tiles are instead cracked. If you intend for 
this sort of behavior, you can change the Tile to <code>TileState.Normal</code> and then crack 
and break it, or only crack if it was Metal beforehand. </p>
<h4 id="engine-alert-symbol">Engine Alert Symbol</h4>
<p>v2.1 adds access to <code>Battle.AlertSymbol.new()</code>, which creates an alert symbol, the 
double exclamation point icon that appears when taking weakness damage or performing 
TFC. If your mods have created one for themselves, you may consider using this instead. </p>
<h3 id="behavior-changes-be-aware">Behavior Changes (Be Aware)</h3>
<h4 id="using-hitdrag">Using Hit.Drag</h4>
<p>v2.1 makes Drag interactions much closer to source material. This reveals some 
possible mistakes modders have made with Drag attacks. Below are some nuances that 
may have been unknown before, and that modders should reconsider for attacks that 
inflict Drag:
1. Drag makes the hit Entity totally unable to act for over 20 frames after movement stops
2. Drag and Freeze are fully incompatible. If any attacks have Hit.Freeze and Hit.Drag, they 
   will never cause Freeze. If you have done this, consider removing Hit.Freeze.</p>
<h4 id="movement-endlag">Movement Endlag</h4>
<p>In v2.0, all movement had at least one frame of endlag. Endlag of <code>frames(0)</code> and 
<code>frames(1)</code> were identical. With v2.1, this is no longer the case. </p>
<p>This will affect any MoveEvent that was using <code>frames(0)</code> for its endlag, which 
is most sliding Spells. There is no actual fix necessary, because modders likely 
intended their 0 frame endlag to really be 0 frames, but modders should be aware 
that projectiles may appear to move slightly more quickly. </p>
<p>The actual effect on speed has to do with how long it takes to reach mutiple Tiles 
away. Things that moved two Tiles will reach the second Tile 1 frame faster now that 
the endlag isn't there. Moving three Tiles will reach the third Tile 2 frames faster, 
etc.</p>
<p>If you intended to have an extra frame on each Tile, you can use <code>frames(1)</code> as the 
endlag to replicate how <code>frames(0)</code> looked and moved in v2.0.</p>
<h4 id="spawning-hit-effects">Spawning Hit Effects</h4>
<p>Some Spells will spawn hit effects in their <code>collision_func</code> or <code>attack_func</code>. Some 
mods spawn the effect on the Spell's Tile; others spawn on the hit Entity's Tile. 
Spawning on the Spell's Tile has always been less correct, because the Spell is moving 
and may have already reached the next Tile before the effect was spawned. This could 
mean the effect spawns behind the hit Entity, for example. </p>
<p>Because of the <a href="#movement-endlag">movement endlag change</a>, this may be more noticeable
(but it could have happened in v2.0, too).
If a mod spawned the hit effect on the target's Tile, no change is necessary. If they 
spawned on the Spell's Tile, consider changing this.</p>
<h4 id="deleting-moving-attacks">Deleting Moving Attacks</h4>
<p>Some Spells will delete themselves in their <code>collision_func</code>. If the Spell is moving, 
it may have changed Tiles before the <code>collision_func</code> ran. This means it could have 
been drawn on the next Tile even though it hit on the previous Tile, because Entities 
still draw on the frame <code>Entity:delete()</code> is called.</p>
<p>This draw error could happen in v2.0, but is likely more noticeable now because of the 
<a href="#movement-endlag">movement endlag change</a>.</p>
<p>If you call <code>erase</code> in your <code>delete_func</code>, or if you called <code>erase</code> intead of <code>delete</code>, 
or if you call <code>hide</code> when you called <code>delete</code>, or if you call <code>hide</code> in the <code>delete_func</code>, 
this will never happen to your Spells. If you do not do any of these, consider adding one.
My recommendation is to call <code>Entity.hide</code> in your <code>delete_func</code>.</p>
<h4 id="find_nearest_characters-fix">find_nearest_characters Fix</h4>
<p>In v2.0, <code>Field.find_nearest_characters</code> did not actually return an ordered list, so the 
first item was not necessarily the nearest Character. This is fixed by v2.1. </p>
<p>If you have used <code>find_nearest_characters</code> and intended to target the nearest Character, 
no change is needed; you may notice that you are now actually getting the nearest Character.</p>
<p>If you have avoided <code>find_nearest_characters</code> to use your own solution, or because it did 
not work as expected, consider updating to now use it.</p>
<h4 id="fire-and-grass">Fire and Grass</h4>
<p>Fire element attacks now remove Grass even if they did not hit an Entity. Mods that 
handled this interaction on their own in v2.0 can now remove their implementation, as
the engine will handle it.</p>
<h4 id="grass-lava-effects">Grass, Lava Effects</h4>
<p>Grass now heals Wood Entities. If your Player mods have implemented a sort of grass heal, 
you can now remove this and rely on the engine's. If you do not, your healing effect will
stack with the engine's.</p>
<p>Fire Entities are no longer harmed by Lava Tiles. If you have added FloatShoes to your 
Player mods only to recreate this interaction in v2.0, you can now remove the FloatShoes 
and remain immune to Lava.</p>
<h4 id="new-tilestates">New TileStates</h4>
<p>Because of the new TileStates (Sea, Metal, Sand), mods that attempted to change Tiles 
on the Field to any TileState (e.g. a mod that picks random TileStates each time) 
may want to be updated to support the additions.</p>
<p>Servers that send data for encounters tend to use hardcoded values based on the TileState 
enum (ezencounters does this). Any use of <code>TileState.Hidden</code> on your server encounters 
may now appear as Sea Tiles. See the repo for new values to adjust to.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.expand", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>